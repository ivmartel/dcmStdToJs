{"version":3,"file":"app.bundle.js","mappings":"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","sources":["webpack://dcmStdToJs/./src/style.css","webpack://dcmStdToJs/./node_modules/css-loader/dist/runtime/api.js","webpack://dcmStdToJs/./node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://dcmStdToJs/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://dcmStdToJs/./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://dcmStdToJs/./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://dcmStdToJs/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://dcmStdToJs/./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://dcmStdToJs/./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://dcmStdToJs/webpack/bootstrap","webpack://dcmStdToJs/webpack/runtime/compat get default export","webpack://dcmStdToJs/webpack/runtime/define property getters","webpack://dcmStdToJs/webpack/runtime/hasOwnProperty shorthand","webpack://dcmStdToJs/webpack/runtime/nonce","webpack://dcmStdToJs/./src/parser.js","webpack://dcmStdToJs/./src/nema.js","webpack://dcmStdToJs/./src/gui.js","webpack://dcmStdToJs/./src/style.css?7163","webpack://dcmStdToJs/./src/index.js"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `body {\n  font-family: Verdana, Arial, Helvetica, sans-serif;\n}\n\ninput[type=\"file\"] {\n  background: #efefef;\n}\n\n#output {\n  margin-top: 10px;\n}\n\n#output p {\n  margin-top: 10px;\n  margin-bottom: 0;\n  background: #efefef;\n  text-align: right;\n  font-size: small;\n}\n\n#output textarea {\n  width: 99%;\n}\n\n.error {\n  color: red;\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/style.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,kDAAkD;AACpD;;AAEA;EACE,mBAAmB;AACrB;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,gBAAgB;EAChB,gBAAgB;EAChB,mBAAmB;EACnB,iBAAiB;EACjB,gBAAgB;AAClB;;AAEA;EACE,UAAU;AACZ;;AAEA;EACE,UAAU;AACZ\",\"sourcesContent\":[\"body {\\n  font-family: Verdana, Arial, Helvetica, sans-serif;\\n}\\n\\ninput[type=\\\"file\\\"] {\\n  background: #efefef;\\n}\\n\\n#output {\\n  margin-top: 10px;\\n}\\n\\n#output p {\\n  margin-top: 10px;\\n  margin-bottom: 0;\\n  background: #efefef;\\n  text-align: right;\\n  font-size: small;\\n}\\n\\n#output textarea {\\n  width: 99%;\\n}\\n\\n.error {\\n  color: red;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","\"use strict\";\n\nvar stylesInDOM = [];\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n  return result;\n}\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n    identifiers.push(identifier);\n  }\n  return identifiers;\n}\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n  return updater;\n}\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n    var newLastIdentifiers = modulesToDom(newList, options);\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n      var _index = getIndexByIdentifier(_identifier);\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n\n/* istanbul ignore next  */\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target);\n\n    // Special case to return head of iframe instead of iframe itself\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n    memo[target] = styleTarget;\n  }\n  return memo[target];\n}\n\n/* istanbul ignore next  */\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n  target.appendChild(style);\n}\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n  var needLayer = typeof obj.layer !== \"undefined\";\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n  css += obj.css;\n  if (needLayer) {\n    css += \"}\";\n  }\n  if (obj.media) {\n    css += \"}\";\n  }\n  if (obj.supports) {\n    css += \"}\";\n  }\n  var sourceMap = obj.sourceMap;\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  }\n\n  // For old IE\n  /* istanbul ignore if  */\n  options.styleTagTransform(css, styleElement, options.options);\n}\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n  styleElement.parentNode.removeChild(styleElement);\n}\n\n/* istanbul ignore next  */\nfunction domAPI(options) {\n  if (typeof document === \"undefined\") {\n    return {\n      update: function update() {},\n      remove: function remove() {}\n    };\n  }\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\nmodule.exports = styleTagTransform;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","__webpack_require__.nc = undefined;","/**\n * DICOM xml parser.\n */\nexport class DicomXMLParser {\n\n  /**\n   * Parse a DICOM standard xml node.\n   *\n   * @param {Node} partNode The main DOM node.\n   * @param {string} origin The origin of the node (optional).\n   * @returns {object} An object containing:\n   * - name: a lael for the result\n   * - origin: the origin of the node\n   * - raw: the raw result\n   * - data: the adapted result as string\n   */\n  parseNode(partNode, origin) {\n    // get book node\n    const book = partNode.querySelector('book');\n    if (!book) {\n      throw new Error('No book node.');\n    }\n    // get book label\n    const label = book.getAttribute('label');\n    if (!label) {\n      throw new Error('No book label.');\n    }\n\n    // get version\n    // 'DICOM PS3.5 2020a - ...'\n    const subtitle = book.querySelector('subtitle');\n    if (!subtitle) {\n      throw new Error('No book subtitle.');\n    }\n    const prefix = 'DICOM ' + label;\n    if (!subtitle.innerHTML.startsWith(prefix)) {\n      throw new Error('Missing DICOM standard version prefix.');\n    }\n    const endIndex = subtitle.innerHTML.indexOf('-');\n    const versionStr =\n      subtitle.innerHTML.substring(prefix.length, endIndex).trim();\n    const version = {\n      year: parseInt(versionStr.substring(0, 4), 10),\n      letter: versionStr.substring(4)\n    };\n\n\n    let result = null;\n\n    if (label === 'PS3.3') {\n      result = parsePs33Node(partNode, origin);\n    } else if (label === 'PS3.5') {\n      result = parsePs35Node(partNode, origin, version);\n    } else if (label === 'PS3.6') {\n      result = parsePs36Node(partNode, origin);\n    } else if (label === 'PS3.7') {\n      result = parsePs37Node(partNode, origin);\n    } else {\n      throw new Error('Unknown book label: ' + label);\n    }\n\n    return result;\n  }\n}\n\n/**\n * Parse a PS3.3 node: Information Object Definitions (IODs)\n * https://dicom.nema.org/medical/dicom/current/output/chtml/part03/PS3.3.html\n *\n * @param {Node} partNode The main DOM node.\n * @param {string} origin The origin of the node (optional).\n * @returns {object} A result object {name, origin, raw, data}.\n */\nfunction parsePs33Node(partNode, origin) {\n  const result = [];\n  // CT: https://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_A.3.3.html#table_A.3-1\n  const iodList = [\n    {name: 'CT Image', label: 'table_A.3-1'},\n    {name: 'MR Image', label: 'table_A.4-1'},\n    // {name: 'NM Image', label: 'table_A.5-1'},\n    // {name: 'US Image', label: 'table_A.6-1'},\n    // {name: 'PET Image', label: 'table_A.21.3-1'},\n    // {\n    //   name: 'Segmentation',\n    //   label: 'table_A.51-1',\n    //   fgLabel: 'table_A.51-2'\n    // }\n  ];\n\n  for (const iod of iodList) {\n    const usageRegex = /M|C/g;\n    let fgModulesProperties = null;\n    // functional group modules\n    if (typeof iod.fgLabel !== 'undefined') {\n      const fgModulesDefs = parseModuleListNode(\n        partNode.querySelector(getSelector(iod.fgLabel)),\n        partNode,\n        iod.name + ' Functional Group Macros',\n        usageRegex\n      );\n      fgModulesProperties =\n        parseModulesFromList(fgModulesDefs, partNode);\n    }\n    // IOD modules\n    const iodModulesDefs = parseModuleListNode(\n      partNode.querySelector(getSelector(iod.label)),\n      partNode,\n      iod.name + ' IOD Modules',\n      usageRegex\n    );\n    const modulesProperties = parseModulesFromList(\n      iodModulesDefs, partNode, fgModulesProperties);\n\n    const typeRegex = /1|1C/g;\n    const modules = modulePropertiesListToObject(\n      modulesProperties, typeRegex);\n\n    result.push({\n      name: iod.name + ' IOD Modules',\n      origin: origin,\n      raw: modules,\n      data: JSON.stringify(modules, null, '  ')\n    });\n  }\n  return result;\n}\n\n/**\n * Parse a PS3.5 node: Data Structures and Encoding\n * https://dicom.nema.org/medical/dicom/current/output/chtml/part05/PS3.5.html\n *\n * @param {Node} partNode The main DOM node.\n * @param {string} origin The origin of the node (optional).\n * @param {object} version The version of the standard.\n * @returns {object} A result object {name, origin, raw, data}.\n */\nfunction parsePs35Node(partNode, origin, version) {\n  // VRs\n  // https://dicom.nema.org/medical/dicom/current/output/chtml/part05/sect_6.2.html#table_6.2-1\n  const vrs = parseVrTableNode(\n    partNode.querySelector(getSelector('table_6.2-1')),\n    'DICOM Value Representations');\n\n  const vrsNames = Object.keys(vrs);\n\n  // replace undefined with null for JSON\n  for (let i = 0; i < vrsNames.length; ++i) {\n    if (typeof vrs[vrsNames[i]] === 'undefined') {\n      vrs[vrsNames[i]] = null;\n    }\n  }\n\n  const vrsResult = {\n    name: 'VRs',\n    origin: origin,\n    raw: vrs,\n    data: JSON.stringify(vrs, null, '  ')\n  };\n\n  // 32-bit VL VRs\n  // https://dicom.nema.org/medical/dicom/current/output/chtml/part05/chapter_7.html#table_7.1-1\n  // table 7.1-1 caption:\n  // - before 2019e: 'Data Element with Explicit VR of OB, OD...'\n  // - >= 2019e: 'Data Element with Explicit VR other than as shown\n  //   in Table 7.1-2'\n  let isBefore2019e = true;\n  if (version.year > 2019 ||\n    (version.year === 2019 && version.letter >= 'e')) {\n    isBefore2019e = false;\n  }\n\n  let xmlid = 'table_7.1-2';\n  if (isBefore2019e) {\n    xmlid = 'table_7.1-1';\n  }\n  const specialVrs = parseVrCaptionNode(\n    partNode.querySelector(getSelector(xmlid)),\n    'Data Element with Explicit VR');\n\n  let vrVl32s = specialVrs;\n  if (!isBefore2019e) {\n    vrVl32s = vrsNames.filter(function (item) {\n      return !specialVrs.includes(item);\n    });\n  }\n\n  const vrVl32Result = {\n    name: '32-bit VL VRs',\n    origin: origin,\n    raw: vrVl32s,\n    data: JSON.stringify(vrVl32s)\n  };\n\n  // Extended or replaced default character repertoire VRs\n  // https://dicom.nema.org/medical/dicom/current/output/html/part05.html#sect_6.1.2.2\n  const charSetVrs = parseCharSetVrNode(\n    partNode.querySelector(getSelector('sect_6.1.2.2')));\n\n  const charSetVrResult = {\n    name: 'Character Set VRs',\n    origin: origin,\n    raw: charSetVrs,\n    data: JSON.stringify(charSetVrs)\n  };\n\n  return [vrsResult, vrVl32Result, charSetVrResult];\n}\n\n/**\n * Parse a PS3.6 node:  Data Dictionary\n * https://dicom.nema.org/medical/dicom/current/output/chtml/part06/PS3.6.html\n *\n * @param {Node} partNode The main DOM node.\n * @param {string} origin The origin of the node (optional).\n * @returns {object} A result object {name, origin, raw, data}.\n */\nfunction parsePs36Node(partNode, origin) {\n  let tags36 = [];\n  // 0002: DICOM File Meta Elements\n  // https://dicom.nema.org/medical/dicom/current/output/chtml/part06/chapter_7.html#table_7-1\n  tags36 = tags36.concat(parseTagsTableNode(\n    partNode.querySelector(getSelector('table_7-1')),\n    partNode,\n    'Registry of DICOM File Meta Elements'));\n  // 0004: DICOM Directory Structuring Elements\n  // https://dicom.nema.org/medical/dicom/current/output/chtml/part06/chapter_8.html#table_8-1\n  tags36 = tags36.concat(parseTagsTableNode(\n    partNode.querySelector(getSelector('table_8-1')),\n    partNode,\n    'Registry of DICOM Directory Structuring Elements'));\n  // DICOM Data Elements\n  // https://dicom.nema.org/medical/dicom/current/output/chtml/part06/chapter_6.html#table_6-1\n  tags36 = tags36.concat(parseTagsTableNode(\n    partNode.querySelector(getSelector('table_6-1')),\n    partNode,\n    'Registry of DICOM Data Elements'));\n\n  const tagsResults = {\n    name: 'DICOM Tags',\n    origin: origin,\n    raw: tags36,\n    data: stringifyTags(adaptTagsForDwv(tags36))\n  };\n\n  // transfer syntax\n  // https://dicom.nema.org/medical/dicom/current/output/chtml/part06/chapter_A.html#table_A-1\n  const uids = parseUidTableNode(\n    partNode.querySelector(getSelector('table_A-1')),\n    partNode,\n    'UID Values',\n    'Transfer Syntax');\n  const uidsResults = {\n    name: 'Transfer syntax UIDs',\n    origin: origin,\n    raw: uids,\n    data: JSON.stringify(adaptUidsForDwv(uids), null, '  ')\n  };\n\n  // SOPs\n  // https://dicom.nema.org/medical/dicom/current/output/chtml/part06/chapter_A.html#table_A-1\n  const sops = parseUidTableNode(\n    partNode.querySelector(getSelector('table_A-1')),\n    partNode,\n    'UID Values',\n    'SOP');\n  const sopsResults = {\n    name: 'SOP class and instance UIDs',\n    origin: origin,\n    raw: sops,\n    data: JSON.stringify(adaptUidsForDwv(sops), null, '  ')\n  };\n\n  return [tagsResults, uidsResults, sopsResults];\n}\n\n/**\n * Parse a PS3.7 node: Message Exchange\n * https://dicom.nema.org/medical/dicom/current/output/chtml/part07/PS3.7.html\n *\n * @param {Node} partNode The main DOM node.\n * @param {string} origin The origin of the node (optional).\n * @returns {object} A result object {name, origin, raw, data}.\n */\nfunction parsePs37Node(partNode, origin) {\n  let tags37 = [];\n  // 0000: command\n  // https://dicom.nema.org/medical/dicom/current/output/chtml/part07/chapter_E.html#table_E.1-1\n  tags37 = tags37.concat(parseTagsTableNode(\n    partNode.querySelector(getSelector('table_E.1-1')),\n    partNode,\n    'Command Fields'));\n  // 0000: command (retired)\n  // https://dicom.nema.org/medical/dicom/current/output/chtml/part07/sect_E.2.html#table_E.2-1\n  tags37 = tags37.concat(parseTagsTableNode(\n    partNode.querySelector(getSelector('table_E.2-1')),\n    partNode,\n    'Retired Command Fields'));\n\n  return {\n    name: 'DICOM tags group 0000',\n    origin: origin,\n    raw: tags37,\n    data: stringifyTags(adaptTagsForDwv(tags37))\n  };\n}\n\n/**\n * Get a selector for an element with the input xml:id.\n * Looking for:\n * - <table label=\"l\"> when the id starts with 'table_'\n * - <section label=\"l\"> when the id starts with 'sect_'\n *\n * @param {string} xmlid The id to look for.\n * @returns {string} The selector.\n */\nfunction getSelector(xmlid) {\n  let prefix = '';\n  if (xmlid.startsWith('table_')) {\n    prefix = 'table[label=\\'' + xmlid.substring(6);\n  } else if (xmlid.startsWith('sect_')) {\n    prefix = 'section[label=\\'' + xmlid.substring(5);\n  } else {\n    throw new Error('Unknown xml:id format.');\n  }\n  return prefix + '\\']';\n}\n\n/**\n * Get the 'linkend' value (an xml:id) of an input string.\n * Looking for: <xref linkend=\"sect_C.1-7\">\n *\n * @param {string} str The input string.\n * @returns {string} The xml:id.\n */\nfunction getLinkend(str) {\n  const regex = /linkend=\"(.+?)\"/g;\n  const matches = [...str.matchAll(regex)];\n  // return first result\n  if (matches.length === 0 || matches[0].length !== 2) {\n    throw new Error('Cannot find linkend value in: ' + str);\n  }\n  return matches[0][1];\n}\n\n/**\n * Extract enum values from a string\n * (created by parseVariableListNode).\n *\n * @param {string} str The string to extract the enum from.\n * @returns {object} An object containing the input string ('str')\n *   either in full or without the enum if found and\n *   the enum ('enum') if found.\n */\nfunction extractEnum(str) {\n  let result = {str: str};\n\n  // looks like: 'enum=ITEM0,ITEM1;'\n  const start = str.indexOf('enum=');\n  if (start !== -1) {\n    const end = str.indexOf(';');\n    if (end === -1) {\n      throw new Error('Badly formed enum');\n    }\n    // remove enum from input\n    const desc = str.substring(0, start) +\n      str.substring(end, str.length - 1);\n    result.str = desc.trim();\n    // store enum as array\n    result.enum = str.substring(start + 5, end).split(',');\n  }\n\n  return result;\n}\n\n/**\n * Extract condition arguments from a string.\n *\n * @param {string} str The string to extract the condition from.\n * @returns {object} An object containing the input string ('str')\n *   either in full or without the condition if found and\n *   the condition ('condition') if found.\n */\nfunction extractCondition(str) {\n  let result = {str: str};\n\n  const reqIndex = str.indexOf('Required if');\n  if (reqIndex !== -1) {\n    let gotConditionMatch = false;\n    // 'Required if Context Identifier (0008,010F) is present.'\n    const regex = /Required if ([\\w\\s]+) (\\([\\dA-F]{4},[\\dA-F]{4}\\)) ([\\w\\s]+)\\./g;\n    const matches = [...str.matchAll(regex)];\n    if (matches.length !== 0 && matches[0].length === 4) {\n      if (matches[0][3] === 'is present' ||\n        matches[0][3] === 'is not present' ||\n        matches[0][3].startsWith('has a value') ||\n        matches[0][3].startsWith('is')) {\n        gotConditionMatch = true;\n        // condition without first match element\n        result.condition = matches[0].slice(1);\n        // remove condition from input\n        result.str = str.replace(matches[0][0], '');\n      }\n    }\n\n    if (!gotConditionMatch) {\n      // condition\n      result.condition = str.substring(reqIndex);\n      // console.log('Cannot extract condition from: ', result.condition);\n      // remove condition from input\n      result.str = str.substring(0, reqIndex);\n    }\n  }\n  return result;\n}\n\n/**\n * Get a compare function for a specific object property.\n *\n * @param {string} property The object property to sort by.\n * @returns {Function} A compare function.\n */\nfunction getCompare(property) {\n  return function (a, b) {\n    if (a[property] < b[property]) {\n      return -1;\n    }\n    if (a[property] > b[property]) {\n      return 1;\n    }\n    return 0;\n  };\n}\n\n/**\n * Get a multi compare function for a list of object properties.\n *\n * @param {Array} properties The list of object properties to sort by.\n * @returns {Function} A compare function.\n */\nfunction getMultiCompare(properties) {\n  return function (a, b) {\n    let res = null;\n    for (let i = 0; i < properties.length; ++i) {\n      res = getCompare(properties[i])(a, b);\n      // if result is not zero, exit\n      if (res !== 0) {\n        return res;\n      }\n    }\n    return res;\n  };\n}\n\n/**\n * Parse a DICOM standard XML table node.\n *\n * @param {Node} tableNode A DOM table node.\n * @param {Node} partNode The main DOM node.\n * @param {string|undefined} expectedCaption Optional expected table caption.\n * @returns {Array} The table property values.\n */\nfunction parseTableNode(tableNode, partNode, expectedCaption) {\n  // check node\n  if (!tableNode) {\n    throw new Error('No table node.');\n  }\n  // check caption\n  if (typeof expectedCaption !== 'undefined') {\n    checkNodeCaption(tableNode, expectedCaption);\n  }\n  // parse node rows\n  const properties = [];\n  const nodes = tableNode.querySelectorAll('tbody > tr');\n  if (nodes) {\n    for (const node of nodes) {\n      properties.push(parseTrNode(node, partNode));\n    }\n  }\n  return properties;\n}\n\n/**\n * Check a node caption.\n *\n * @param {Node} node A DOM node.\n * @param {string} expectedCaption The expected node caption.\n * @param {boolean} isEqualCheck Bool to perform equal or include\n *   caption text check.\n */\nfunction checkNodeCaption(node, expectedCaption, isEqualCheck) {\n  if (typeof isEqualCheck === 'undefined') {\n    isEqualCheck = true;\n  }\n  const captions = node.getElementsByTagName('caption');\n  if (!captions) {\n    throw new Error('No node caption.');\n  }\n  if (captions.length === 0) {\n    throw new Error('Empty node caption.');\n  }\n  const text = captions[0].innerHTML;\n  if (isEqualCheck) {\n    if (text !== expectedCaption) {\n      if (text.toLowerCase() === expectedCaption.toLowerCase()) {\n        console.warn('Accepting caption with different case: ' +\n          expectedCaption);\n      } else {\n        throw new Error(\n          'The node caption is not the expected one: ' +\n          expectedCaption + ' != ' + text);\n      }\n    }\n  } else {\n    if (!text.includes(expectedCaption)) {\n      throw new Error(\n        'The node caption does not include the expected one: ' +\n        expectedCaption + ' != ' + text);\n    }\n  }\n}\n\n/**\n * Parse a DICOM standard XML table row node.\n *\n * @param {Node} trNode A DOM row node.\n * @param {Node} partNode The main DOm node.\n * @returns {Array} The row property values.\n */\nfunction parseTrNode(trNode, partNode) {\n  const properties = [];\n  const nodes = trNode.querySelectorAll('td');\n  if (nodes) {\n    for (const node of nodes) {\n      properties.push(parseTdNode(node, partNode));\n    }\n  }\n  // return\n  return properties;\n}\n\n/**\n * Parse a DICOM standard XML table row cell node.\n *\n * @param {Node} tdNode A DOM cell node.\n * @param {Node} partNode The main DOM node.\n * @returns {Array} The cell property values.\n */\nfunction parseTdNode(tdNode, partNode) {\n  const properties = [];\n  const nodes = tdNode.childNodes;\n  if (nodes) {\n    for (const node of nodes) {\n      // type 1 (elements) to avoid #text between elements\n      if (node.nodeType === 1) {\n        if (node.nodeName === 'variablelist') {\n          properties.push(parseVariableListNode(node));\n        } else {\n          properties.push(parseContentNode(node, partNode));\n        }\n      }\n    }\n  }\n  // return\n  return properties;\n}\n\n/**\n * Parse a DICOM standard XML table row cell content node,\n * mainly para and note.\n *\n * @param {Node} paraNode A DOM para node.\n * @param {Node} partNode The main DOM node.\n * @returns {string} The para value.\n */\nfunction parseContentNode(paraNode, partNode) {\n  let content = '';\n  const nodes = paraNode.childNodes;\n  if (nodes) {\n    for (const node of nodes) {\n      if (node.nodeType === 1) {\n        // type 1: element\n        if (node.nodeName === 'xref') {\n          // just keep linkend for xref\n          content += 'linkend=\"' + node.attributes.linkend.value + '\"';\n        } else {\n          content += parseContentNode(node, partNode);\n        }\n      } else if (node.nodeType === 3) {\n        // type 3: text\n        content += node.textContent;\n      } else {\n        console.warn('Un-anticipated node:' + node);\n      }\n    }\n  }\n  // clean\n  content = cleanString(content);\n\n  // link to section with defined terms\n  // (for ex in module attributes description)\n  const regex = /See linkend=.+ for Defined Terms\\./g;\n  const match = content.match(regex);\n  if (match && match.length === 1) {\n    let foundTermsList = false;\n    const xmlid = getLinkend(content);\n    if (xmlid.startsWith('sect_')) {\n      const subSection = partNode.querySelector(getSelector(xmlid));\n      const nodes = subSection.childNodes;\n      if (nodes) {\n        for (const node of nodes) {\n          if (node.nodeName === 'variablelist') {\n            if (!foundTermsList) {\n              foundTermsList = true;\n              content = content.replace(match[0], parseVariableListNode(node));\n            } else {\n              console.warn('Multiple variable list for ' + xmlid);\n            }\n          }\n        }\n      }\n    }\n    if (!foundTermsList) {\n      console.warn('Did not find terms list with: ' + content);\n    }\n  }\n\n  // return\n  return content;\n}\n\n/**\n * Parse a DICOM standard XML VariableList node\n *\n * @param {Node} listNode A DOM list node.\n * @returns {string} The list values.\n */\nfunction parseVariableListNode(listNode) {\n  let content = 'enum=';\n  const listChilds = listNode.childNodes;\n  if (listChilds) {\n    for (const node of listChilds) {\n      if (node.nodeName === 'varlistentry') {\n        const entries = node.childNodes;\n        if (entries) {\n          for (const entryNode of entries) {\n            if (entryNode.nodeName === 'term') {\n              content += cleanString(entryNode.textContent) + ',';\n            }\n          }\n        }\n      }\n    }\n  }\n  // replace last comma with semicolon\n  return content.replace(/,$/, ';');\n}\n\n/**\n * Trim and get rid of new line and zero-width space.\n *\n * @param {string} str The input string.\n * @returns {string} The cleaned string.\n */\nfunction cleanString(str) {\n  return str.trim().replace(/\\n/g, '').replace(/\\u200B/g, '');\n}\n\n/**\n * Parse a DICOM standard XML tags table node.\n *\n * @param {Node} tableNode A DOM table node.\n * @param {Node} partNode The main DOM node.\n * @param {string} expectedCaption The expected node caption.\n * @returns {Array} The list of DICOM tags objects.\n */\nfunction parseTagsTableNode(tableNode, partNode, expectedCaption) {\n  const values = parseTableNode(tableNode, partNode, expectedCaption);\n  const tags = [];\n  let tag = null;\n  for (const value of values) {\n    tag = tagPropertiesToObject(value);\n    if (tag) {\n      tags.push(tag);\n    }\n  }\n  return tags;\n}\n\n/**\n * Parse a DICOM standard XML UIDs table node.\n *\n * @param {Node} tableNode A DOM table node.\n * @param {Node} partNode The main DOM node.\n * @param {string} expectedCaption The expected node caption.\n * @param {string} uidType The UID type.\n * @returns {object} The list of transfer syntax UIDs.\n */\nfunction parseUidTableNode(tableNode, partNode, expectedCaption, uidType) {\n  const values = parseTableNode(tableNode, partNode, expectedCaption);\n  const uids = {};\n  let uid = null;\n  for (const value of values) {\n    uid = uidPropertiesToObject(value, uidType);\n    if (uid) {\n      //uids[uid.value] = uid.name;\n      uids[uid.value] = uid.keyword;\n    }\n  }\n  return uids;\n}\n\n/**\n * Extract a string VR type for a string.\n *\n * @param {string} str Input string.\n * @returns {string|undefined} The type if found or undefined.\n */\nfunction stringVrTypeExtractor(str) {\n  let type;\n  if (str.startsWith('A string of characters') ||\n    str.startsWith('A character string') ||\n    str.startsWith('A concatenated date-time character string')) {\n    type = 'string';\n  }\n  return type;\n}\n\n/**\n * Extract an octet VR type for a string.\n *\n * @param {string} str Input string.\n * @returns {string|undefined} The type if found or undefined.\n */\nfunction octetVrTypeExtractor(str) {\n  let type;\n  // pre 2017 uses string and not stream...\n  if (str.startsWith('An octet-stream') ||\n    str.startsWith('A string of bytes')) {\n    type = 'Uint8';\n  }\n  return type;\n}\n\n/**\n * Extract a integer VR type for a string.\n *\n * @param {string} str Input string.\n * @returns {string|undefined} The type if found or undefined.\n */\nfunction intVrTypeExtractor(str) {\n  let type;\n  const regex = /(Signed|Unsigned) binary integer (\\d{2}) bits long/g;\n  const match = [...str.matchAll(regex)];\n  if (match.length === 1 && match[0].length === 3) {\n    type = match[0][1] === 'Unsigned' ? 'Ui' : 'I';\n    type += 'nt' + match[0][2];\n  }\n  return type;\n}\n\n/**\n * Extract a float VR type for a string.\n *\n * @param {string} str Input string.\n * @returns {string|undefined} The type if found or undefined.\n */\nfunction floatVrTypeExtractor(str) {\n  let type;\n  const regex = /IEEE 754:1985 (\\d{2})-bit Floating Point Number/g;\n  const match = [...str.matchAll(regex)];\n  if (match.length === 1 && match[0].length === 2) {\n    type = 'Float' + match[0][1];\n  }\n  return type;\n}\n\n/**\n * Extract a word VR type for a string.\n *\n * @param {string} str Input string.\n * @returns {string|undefined} The type if found or undefined.\n */\nfunction wordVrTypeExtractor(str) {\n  let type;\n  // pre 2017 uses string and not stream...\n  const regex = /A (?:stream|string) of (\\d{2})-bit words/g;\n  const match = [...str.matchAll(regex)];\n  if (match.length === 1 && match[0].length === 2) {\n    type = 'Uint' + match[0][1];\n  }\n  return type;\n}\n\n/**\n * Extract a flaot word VR type for a string.\n *\n * @param {string} str Input string.\n * @returns {string|undefined} The type if found or undefined.\n */\nfunction floatWordVrTypeExtractor(str) {\n  let type;\n  const regex = /(\\d{2})-bit IEEE 754:1985 floating point words/g;\n  const match = [...str.matchAll(regex)];\n  if (match.length === 1 && match[0].length === 2) {\n    type = 'Uint' + match[0][1];\n  }\n  return type;\n}\n\n/**\n * Parse a VR 32bit VL DICOM standard XML node.\n *\n * @param {Node} tableNode The content node.\n * @param {Node} partNode The main DOM node.\n * @param {string} expectedCaption The expected node caption root.\n * @returns {Array} The list of VRs.\n */\nfunction parseVrTableNode(tableNode, partNode, expectedCaption) {\n  const values = parseTableNode(tableNode, partNode, expectedCaption);\n  const vrs = {};\n\n  const extractors = [\n    stringVrTypeExtractor,\n    octetVrTypeExtractor,\n    intVrTypeExtractor,\n    floatVrTypeExtractor,\n    wordVrTypeExtractor,\n    floatWordVrTypeExtractor\n  ];\n\n  for (const value of values) {\n    // 'short' VR name\n    let vrName = value[0][0];\n    // definition\n    let definition = value[1][0];\n    let type;\n    for (const extractor of extractors) {\n      type = extractor(definition);\n      // exit if found\n      if (typeof type !== 'undefined') {\n        break;\n      }\n    }\n    // log unknown types (typically AT and SQ)\n    if (typeof type === 'undefined') {\n      console.log('Unknown VR type for ' + vrName);\n    }\n    // store\n    vrs[vrName] = type;\n  }\n  return vrs;\n}\n\n/**\n * Parse a module list DICOM standard XML node:\n *   can be an IOD modules list or a functional group macros.\n *\n * @param {Node} node The content node.\n * @param {Node} partNode The main DOM node.\n * @param {string} expectedCaption The expected node caption.\n * @param {string} usageRegex Optional usage selection regex.\n * @returns {Array} The list of IOD modules.\n */\nfunction parseModuleListNode(node, partNode, expectedCaption, usageRegex) {\n  const values = parseTableNode(node, partNode, expectedCaption);\n  const modules = [];\n  let module = null;\n  for (const value of values) {\n    module = moduleDefinitionPropertiesToObject(value, usageRegex);\n    if (module) {\n      modules.push(module);\n    }\n  }\n  return modules;\n}\n\n/**\n * Get modules from a modules definition list.\n *\n * @param {Array} list The IOD module list.\n * @param {Node} partNode The main DOM node.\n * @param {object} fgModulesProperties Optional functional group\n *   modules properties, undefined to parse a functional group.\n * @returns {Array} The modules array.\n */\nfunction parseModulesFromList(list, partNode, fgModulesProperties) {\n  const result = {};\n  for (const item of list) {\n    // TODO include usage and condition\n    const moduleName = item.module;\n    // get the module from the referenced section\n    const xmlid = getLinkend(item.reference);\n    const sectNode = partNode.querySelector(getSelector(xmlid));\n    for (const node of sectNode.childNodes) {\n      // stop at first table\n      if (node.nodeName === 'table') {\n        let name = moduleName;\n        if (typeof fgModulesProperties === 'undefined') {\n          name += ' Macro';\n        } else {\n          name += ' Module';\n        }\n        name += ' Attributes';\n        result[moduleName] =\n          parseModuleAttributesNode(node, partNode, name, fgModulesProperties);\n        break;\n      }\n    }\n  }\n  return result;\n}\n\nlet macros = {};\n\n/**\n * Parse a Information Entities (IE) modules DICOM standard XML node.\n *\n * @param {Node} node The content node.\n * @param {Node} partNode The main DOM node.\n * @param {string} expectedCaption The expected node caption.\n * @param {object} fgModules A list of functional group modules.\n * @returns {Array} The list of ....\n */\nfunction parseModuleAttributesNode(node, partNode, expectedCaption, fgModules) {\n  // expecting macro includes as: 'Include <xref linkend=\"table_10-18\"\n  //   xrefstyle=\"select: label quotedtitle\"/>'\n  const includeMacro = 'Include linkend=';\n  const includeFG = 'Include one or more Functional Group Macros';\n\n  const rows = parseTableNode(node, partNode, expectedCaption);\n  const result = [];\n  let startSq0 = false;\n  let startSq1 = false;\n  for (const row of rows) {\n    if (row.length === 0) {\n      const nodeCaptions = node.getElementsByTagName('caption');\n      if (nodeCaptions && nodeCaptions.length !== 0) {\n        console.warn('Empty module row in: ', nodeCaptions[0].innerHTML);\n      } else {\n        console.warn('Empty module row');\n      }\n      continue;\n    }\n    let attribute;\n    const attributeName = cleanString(row[0][0]);\n    let includeCase = false;\n\n    if (row.length === 4) {\n      // default: Attribute Name, Tag, Type, Attribute Description\n      attribute = [row];\n    } else if (attributeName.includes(includeMacro)) {\n      // include module macro\n      includeCase = true;\n      const xmlid = getLinkend(attributeName);\n      if (xmlid.startsWith('table_')) {\n        // store macro if not done yet\n        if (!macros[xmlid]) {\n          const subTable = partNode.querySelector(getSelector(xmlid));\n          macros[xmlid] =\n            parseModuleAttributesNode(subTable, partNode, undefined);\n        }\n        attribute = macros[xmlid];\n      }\n    } else if (attributeName.includes(includeFG)) {\n      // include functional group macro\n      includeCase = true;\n      attribute = [];\n      const keys = Object.keys(fgModules);\n      for (let key of keys) {\n        attribute = attribute.concat(fgModules[key]);\n      }\n    } else {\n      // avoid these rows\n      // code sequence: BASIC CODED ENTRY ATTRIBUTES, ENHANCED ENCODING MODE\n      if (attributeName !== 'BASIC CODED ENTRY ATTRIBUTES' &&\n        attributeName !== 'ENHANCED ENCODING MODE') {\n        console.warn('Unexpected row: \\'' + attributeName + '\\'');\n      }\n      continue;\n    }\n\n    // handle sequences\n    if (attributeName.startsWith('>')) {\n      // previous attribute (first level)\n      let previousAtt = result[result.length - 1];\n      // set flag and append array for first item\n      if (!startSq0) {\n        previousAtt.push([]);\n        startSq0 = true;\n      }\n      // remove '>' from name\n      if (!includeCase) {\n        attribute[0][0][0] = attribute[0][0][0].substring(1);\n      }\n\n      if (attributeName.startsWith('>>')) {\n        // previous attribute (second level)\n        previousAtt = previousAtt[4][previousAtt[4].length - 1];\n        // set flag and append array for first item\n        if (!startSq1) {\n          previousAtt.push([]);\n          startSq1 = true;\n        }\n      } else {\n        // reset second level flag\n        if (startSq1) {\n          startSq1 = false;\n        }\n      }\n      // append to previous attribute\n      previousAtt[4].push(...attribute);\n    } else if (attributeName.startsWith('>>>')) {\n      console.warn('Not expecting a triple \\'>\\'');\n    } else {\n      // reset first level flag\n      if (startSq0) {\n        startSq0 = false;\n      }\n      // reset second level flag\n      if (startSq1) {\n        startSq1 = false;\n      }\n      // append to result\n      result.push(...attribute);\n    }\n  }\n\n  return result;\n}\n\n/**\n * Parse a VR 32bit VL DICOM standard XML node.\n *\n * @param {Node} node The content node.\n * @param {string} expectedCaptionRoot The expected node caption root.\n * @returns {Array} The list VRs.\n */\nfunction parseVrCaptionNode(node, expectedCaptionRoot) {\n  // check node\n  if (!node) {\n    throw new Error('No Vr caption node.');\n  }\n  // check caption\n  checkNodeCaption(node, expectedCaptionRoot, false);\n  // expecting something like:\n  // 'Data Element with Explicit VR of OB, OW, OF, OD, SQ, UT or UN'\n  const regex = /(?:\\s)([A-Z]{2})(?:,|\\sor|\\sand|$)/g;\n  const caption = node.getElementsByTagName('caption');\n  const text = caption[0].innerHTML;\n  const matches = text.matchAll(regex);\n  const result = [];\n  for (const match of matches) {\n    result.push(match[1]); // [0] includes non capturing groups\n  }\n  return result;\n}\n\n/**\n * Parse a Character Set VR DICOM standard XML node.\n *\n * @param {Node} node The content node.\n * @returns {Array} The list of VRs.\n */\nfunction parseCharSetVrNode(node) {\n  // check node\n  if (!node) {\n    throw new Error('No char Vr node.');\n  }\n\n  const result = [];\n\n  // expecting something like:\n  // For Data Elements with Value Representations of SH (Short String),\n  // LO (Long String), UC (Unlimited Characters), ST (Short Text),\n  // LT (Long Text), UT (Unlimited Text) or PN (Person Name)\n  const regex = /(?:\\s)([A-Z]{2})(?:\\s\\(\\w+\\s\\w+\\))/g;\n  const paras = node.getElementsByTagName('para');\n  for (const para of paras) {\n    if (para.innerHTML.startsWith(\n      'For Data Elements with Value Representations')) {\n      const text = para.innerHTML;\n      const matches = text.matchAll(regex);\n      for (const match of matches) {\n        result.push(match[1]); // [0] includes non capturing groups\n      }\n    }\n  }\n  return result;\n}\n\n/**\n * Parse tag values as array and return a tag object.\n *\n * @param {Array} properties A tag row array of properties (length=6).\n * @returns {object} A tag object: {group, element, keyword, vr, vm}.\n */\nfunction tagPropertiesToObject(properties) {\n  // check length (then only use the first element of each item)\n  if (properties.length !== 5 && properties.length !== 6) {\n    throw new Error(\n      'Not the expected tag properties size: ' + properties.length);\n  }\n  // split (group,element)\n  const geSplit = properties[0][0].split(',');\n  const group = geSplit[0].substring(1, 5).toString();\n  const element = geSplit[1].substring(0, 4).toString();\n  // return\n  return {\n    group: group,\n    element: element,\n    keyword: typeof properties[2][0] === 'undefined' ? '' : properties[2][0],\n    vr: typeof properties[3][0] === 'undefined' ? '' : properties[3][0],\n    vm: typeof properties[4][0] === 'undefined' ? '' : properties[4][0]\n  };\n}\n\n/**\n * Parse UID values as array and return a UID object.\n *\n * @param {Array} properties A UID row array of properties (length=6).\n * @param {string} uidType The UID type.\n * @returns {object} A tag object: {group, element, keyword, vr, vm}.\n */\nfunction uidPropertiesToObject(properties, uidType) {\n  // check length (then only use the first element of each item)\n  if (properties.length !== 4 && properties.length !== 5) {\n    throw new Error('Not the expected UID values size: ' + properties.length);\n  }\n  let uid = null;\n  // check UID type\n  // a 'UID keyword' column was added in 2020d, use len-2 instead of index\n  if (properties[properties.length - 2][0].includes(uidType)) {\n    uid = {\n      value: properties[0][0],\n      name: properties[1][0],\n      keyword: properties[2][0]\n    };\n  }\n  return uid;\n}\n\n\n/**\n * Objectify IOD modules properties.\n *\n * @param {Array} properties The IOD module properties.\n * @param {string} usageRegex Optional usage selection regex.\n * @returns {object} A IOD module object.\n */\nfunction moduleDefinitionPropertiesToObject(properties, usageRegex) {\n  // check length (then only use the first element of each item)\n  if (properties.length !== 3 && properties.length !== 4) {\n    throw new Error('Not the expected IOD module values size: ' +\n      properties.length);\n  }\n  // possible Information Entities (IE) extra first column\n  let startCol = 0;\n  if (properties.length === 4) {\n    startCol = 1;\n  }\n  let moduleDef = {\n    module: properties[startCol][0],\n    reference: properties[startCol + 1][0],\n    usage: properties[startCol + 2][0]\n  };\n\n  // get condition from usage\n  if (moduleDef.usage.startsWith('C - Required')) {\n    moduleDef.condition = moduleDef.usage.substring(4);\n    moduleDef.usage = 'C';\n  }\n\n  // Usage property:\n  // - M: Mandatory;\n  // - C: Conditional;\n  // - U: User Option;\n  // https://dicom.nema.org/medical/dicom/current/output/chtml/part03/chapter_A.html#sect_A.1.3\n  if (moduleDef.usage !== 'M' && moduleDef.usage !== 'C' &&\n    moduleDef.usage !== 'U') {\n    console.warn('Unexpected IOD module usage: ' + moduleDef.usage);\n  }\n\n  // usage filter\n  if (typeof usageRegex !== 'undefined' &&\n    moduleDef.usage.match(usageRegex) === null) {\n    return null;\n  }\n\n  return moduleDef;\n}\n\n/**\n * Objectify modules properties.\n *\n * @param {Array} properties The module properties.\n * @param {string} typeRegex Optional type selection regex.\n * @returns {object} A module object.\n */\nfunction modulePropertiesListToObject(properties, typeRegex) {\n  const keys = Object.keys(properties);\n  const result = {};\n  for (const key of keys) {\n    const modules = [];\n    for (const mod of properties[key]) {\n      const module = modulePropertiesToObject(mod, typeRegex);\n      if (module) {\n        modules.push(module);\n      }\n    }\n    if (modules.length !== 0) {\n      result[key] = modules;\n    }\n  }\n  return result;\n}\n\n/**\n * Objectify modules properties.\n *\n * @param {Array} properties The module properties.\n * @param {string} typeRegex Optional type selection regex.\n * @returns {object} A module object.\n */\nfunction modulePropertiesToObject(properties, typeRegex) {\n  // check length (then only use the first element of each item)\n  if (properties.length !== 4 && properties.length !== 5) {\n    throw new Error('Not the expected module values size: ' +\n      properties.length);\n  }\n  let module = {\n    name: properties[0][0],\n    tag: properties[1][0],\n    type: properties[2][0]\n  };\n\n  // Type property:\n  // - 1: Required; 1C: Type 1 with condition;\n  // - 2: Required, Empty if Unknown; 2C: Type 2 with condition;\n  // - 3: Optional\n  // https://dicom.nema.org/medical/dicom/current/output/chtml/part05/sect_7.4.html\n  if (module.type !== '1' && module.type !== '1C' &&\n    module.type !== '2' && module.type !== '2C' &&\n    module.type !== '3') {\n    console.warn('Unexpected module type: ' + module.type);\n  }\n\n  // type filter\n  if (typeof typeRegex !== 'undefined' &&\n    module.type.match(typeRegex) === null) {\n    return null;\n  }\n\n  // description\n  let desc = '';\n  for (let i = 0; i < properties[3].length; ++i) {\n    // extract enum\n    const extract0 = extractEnum(properties[3][i]);\n    if (typeof extract0.enum !== 'undefined') {\n      module.enum = extract0.enum;\n    }\n    if (extract0.str.length !== 0) {\n      // extract condition\n      const extract1 = extractCondition(extract0.str);\n      if (typeof extract1.condition !== 'undefined') {\n        module.condition = extract1.condition;\n      }\n      // keep what's left\n      if (extract1.str.length !== 0) {\n        if (i !== 0) {\n          desc += ' ';\n        }\n        desc += extract1.str;\n      }\n    }\n  }\n  module.desc = desc;\n\n  // include\n  if (properties.length === 5) {\n    module.items = [];\n    const subProperties = properties[4];\n    for (const subProps of subProperties) {\n      const subModule = modulePropertiesToObject(subProps, typeRegex);\n      if (subModule) {\n        module.items.push(subModule);\n      }\n    }\n  }\n\n  return module;\n}\n\n/**\n * Adapt tags:\n * - replace 'x' in groups and elements\n * - add GenericGroupLength to groups\n * - replace non single VRs\n *\n * @param {Array} inputTags An array of tags.\n * @returns {Array} The adapted tags as a new array.\n */\nfunction adaptTagsForDwv(inputTags) {\n  // check tags\n  if (!inputTags) {\n    throw new Error('No tags.');\n  }\n  if (inputTags.length === 0) {\n    throw new Error('Empty tags.');\n  }\n\n  /**\n   * Replace 'x's in groups and elements.\n   *\n   * @param {string} str The input string.\n   * @returns {string} The updated string.\n   */\n  function replaceXs(str) {\n    str = str.replace(/xxxxx/g, 'x0004');\n    str = str.replace(/xxxx/g, 'x001');\n    str = str.replace(/xx/g, '00');\n    return str;\n  }\n\n  // clone input\n  const tags = inputTags.slice();\n\n  // list groups\n  const groups = [];\n  for (let t = 0; t < tags.length; ++t) {\n    // replace 'x's\n    tags[t].group = replaceXs(tags[t].group);\n    tags[t].element = replaceXs(tags[t].element);\n    // list groups\n    const grp = tags[t].group;\n    if (!groups.includes(grp)) {\n      groups.push(grp);\n    }\n  }\n\n  // add GenericGroupLength to groups\n  for (const group of groups) {\n    if (group !== '0000' && group !== '0002') {\n      tags.push({\n        group: group,\n        element: '0000',\n        keyword: 'GenericGroupLength',\n        vr: 'UL',\n        vm: '1'\n      });\n    }\n  }\n\n  // sort tags\n  tags.sort(getMultiCompare(['group', 'element']));\n\n  // check VRs\n  for (let i = 0; i < tags.length; ++i) {\n    let vr = tags[i].vr;\n    if (typeof vr !== 'undefined') {\n      if (vr.length !== 2) {\n        if (vr.substring(0, 8) === 'See Note') {\n          // #modif \"See Note\" -> \"NONE\"\n          vr = 'NONE';\n        } else if (vr === 'OB or OW') {\n          // #modif \"OB or OW\" -> \"ox\"\n          vr = 'ox';\n        } else if (vr === 'US or OW') {\n          // #modif \"US or OW\" -> \"xx\"\n          vr = 'xx';\n        } else if (vr === 'US or SS' ||\n          vr === 'US or SS or OW') {\n          // #modif \"US or SS\" or \"US or SS or OW\" -> \"xs\"\n          vr = 'xs';\n        } else {\n          console.warn('Unknown VR: \\'' + vr +\n            '\\' for ' + tags[i].group + ',' + tags[i].element);\n        }\n      }\n    } else {\n      vr = '';\n    }\n    tags[i].vr = vr;\n  }\n\n  return tags;\n}\n\n/**\n * Adapt UIDs:\n * - replace '&amp;' in name with '&'\n * - remove comments in name: string after ':'\n *\n * @param {object} inputUids An list of UIDs.\n * @returns {object} The adapted UIDs as a new list.\n */\nfunction adaptUidsForDwv(inputUids) {\n  const keys = Object.keys(inputUids);\n  for (const key of keys) {\n    let name = inputUids[key];\n    // replace '&amp'\n    if (name.includes('&amp;')) {\n      name = name.replace('&amp;', '&');\n      inputUids[key] = name;\n    }\n    // remove comment\n    if (name.includes(':')) {\n      const pos = name.indexOf(':');\n      inputUids[key] = name.substring(0, pos);\n    }\n  }\n\n  return inputUids;\n}\n\n/**\n * Stringify a tags array.\n *\n * @param {Array} tags The tags array.\n * @returns {string} A stringified version of the input array.\n */\nfunction stringifyTags(tags) {\n  // check tags\n  if (!tags) {\n    throw new Error('No tags.');\n  }\n  if (tags.length === 0) {\n    throw new Error('Empty tags.');\n  }\n\n  // tabulation\n  const tab = '  ';\n  const quote = '\\'';\n  // result text\n  let text = '{\\n';\n\n  let group = '';\n  for (let i = 0; i < tags.length; ++i) {\n    const tag = tags[i];\n    let isFirstOfgroup = false;\n    // start group section\n    if (tag.group !== group) {\n      isFirstOfgroup = true;\n      // close previous\n      if (i !== 0) {\n        text += '\\n' + tab + '},\\n';\n      }\n      // start new\n      group = tag.group;\n      text += tab + quote + tag.group + quote + ': {\\n';\n    }\n\n    // tag\n    let tagText = isFirstOfgroup ? '' : ',\\n';\n    tagText += tab + tab +\n      quote + tag.element + quote + ': [' +\n      quote + tag.vr + quote + ', ' +\n      quote + tag.vm + quote + ', ' +\n      quote + tag.keyword + quote + ']';\n    text += tagText;\n  }\n\n  // last group line\n  text += '\\n' + tab + '}\\n';\n  // last line\n  text += '}\\n';\n\n  return text;\n}\n","// DICOM versions object\n// (only those published with this repo since NEMA does not do CORS...)\nconst dicomVersions = {\n  '2016': ['a'],\n  '2018': ['a'],\n  '2020': ['a'],\n  '2022': ['a'],\n};\n\n// Supported DICOM parts\nconst dicomParts = ['03', '05', '06', '07'];\n\n/**\n * Get the list of DICOM standard parts.\n *\n * @returns {Array} An array of parts\n */\nexport function getDicomParts() {\n  return dicomParts;\n}\n\n/**\n * Get the list of DICOM standard versions.\n *\n * @returns {Array} An array of versions, ordered from most recent to older.\n */\nexport function getDicomVersions() {\n  const keys = Object.keys(dicomVersions);\n  keys.sort(compare);\n  // create version strings\n  const versions = [];\n  for (let i = 0; i < keys.length; ++i) {\n    const majorVersion = keys[i];\n    const minorVersions = dicomVersions[majorVersion];\n    for (let j = 0; j < minorVersions.length; ++j) {\n      versions.push(majorVersion + minorVersions[j]);\n    }\n  }\n  // return\n  return versions;\n}\n\n/**\n * Sort keys.\n *\n * @param {string} a First string.\n * @param {string} b Second string.\n * @returns {number} Negative is a > b.\n */\nfunction compare(a, b) {\n  return parseInt(b, 10) - parseInt(a, 10);\n}\n\n/**\n * Get a list of DICOM versions associated to their resrouce link.\n *\n * @param {string} partNumber The part number as a string.\n * @returns {Array} An array of {xml, html} objects.\n */\nexport function getDicomPartLinks(partNumber) {\n  const versions = getDicomVersions();\n  const links = {};\n  for (let i = 0; i < versions.length; ++i) {\n    links[versions[i]] = {\n      'xml': getXmlLink(versions[i], partNumber),\n      'html': getHtmlLink(versions[i], partNumber),\n    };\n  }\n  // return\n  return links;\n}\n\n/**\n * Get the xml link to the standard.\n * Links go to github since nema does not publish standard with CORS\n *\n * @param {string} version The standard version.\n * @param {string} partNumber The standard part number as a string.\n * @returns {string} The full link to the desired file.\n */\nfunction getXmlLink(version, partNumber) {\n  const githubRoot = 'https://raw.githubusercontent.com/ivmartel/dcmStdToJs/main/resources/standard';\n  const partFileName = 'part' + partNumber;\n  return githubRoot + '/' + version + '/' + partFileName + '.xml';\n}\n\n/**\n * Get the html link to the standard.\n *\n * @param {string} version The standard version.\n * @param {string} partNumber The standard part number as a string.\n * @returns {string} The full link to the desired html.\n */\nfunction getHtmlLink(version, partNumber) {\n  const nemaRoot = 'http://dicom.nema.org/medical/dicom';\n  const partFileName = 'part' + partNumber;\n  return nemaRoot + '/' + version + '/output/html/' + partFileName + '.html';\n}\n","import {DicomXMLParser} from './parser.js';\nimport * as nema from './nema.js';\n\n/**\n * GUI classe.\n */\nexport class Gui {\n  /**\n   * Setup the gui: bind parse button.\n   */\n  setup() {\n    document.getElementById('parseButton').addEventListener(\n      'click', onParseButtonClick);\n    document.getElementById('fileupload').addEventListener(\n      'change', onFileuploadChange);\n  }\n\n  /**\n   * DOMContentLoaded handler: update the version select.\n   */\n  onDOMContentLoaded() {\n    updateStandardSelect();\n  }\n}\n\n/**\n * Set the progress of the progressbar.\n *\n * @param {Event} event A progress event.\n */\nfunction setProgress(event) {\n  const progressBar = document.getElementById('progressBar');\n  if (event.lengthComputable) {\n    progressBar.max = event.total;\n    progressBar.value = event.loaded;\n  }\n}\n\n/**\n * Handle file upload change event.\n *\n * @param {Event} event The file upload change event.\n */\nfunction onFileuploadChange(event) {\n  // enable / disable parse button if files were selected\n  const parseButton = document.getElementById('parseButton');\n  if (event.target.files.length !== 0) {\n    parseButton.disabled = false;\n  } else {\n    parseButton.disabled = true;\n  }\n}\n\n/**\n * Handle parse button click event.\n *\n * @param {Event} event The parse button click event.\n */\nfunction onParseButtonClick(event) {\n  const button = event.target;\n\n  // reset progress\n  setProgress({loaded: 0, total: 100, lengthComputable: true});\n\n  // disable button\n  button.disabled = true;\n\n  // clear output zone\n  const outputDiv = document.getElementById('output');\n  outputDiv.innerHTML = '';\n\n  const parser = new DicomXMLParser();\n\n  // parse file if provided, parse link otherwise\n  const fileInputElement = document.getElementById('fileupload');\n  if (fileInputElement.files.length === 1) {\n    const file = fileInputElement.files[0];\n    const reader = new FileReader();\n    reader.onload = function (event) {\n      // enable button\n      button.disabled = false;\n      // show tags\n      const domParser = new DOMParser();\n      const doc = domParser.parseFromString(\n        event.target.result, 'application/xml');\n      try {\n        showResult(parser.parseNode(doc, file.name));\n      } catch (error) {\n        showError(error);\n      }\n    };\n    reader.onprogress = setProgress;\n    reader.onloadend = setProgress;\n    reader.onerror = function () {\n      showError('ERROR while loading data, see log for details...');\n    };\n    reader.readAsText(file);\n  } else {\n    // use selected version or default\n    const dicomVersionsSelect = document.getElementById('dicomVersions');\n    let selectedVersion = dicomVersionsSelect.options[\n      dicomVersionsSelect.selectedIndex\n    ].value;\n    const dicomPartsSelect = document.getElementById('dicomParts');\n    let selectedPart = dicomPartsSelect.options[\n      dicomPartsSelect.selectedIndex\n    ].value;\n\n    const url = nema.getDicomPartLinks(selectedPart)[selectedVersion].xml;\n    const request = new XMLHttpRequest();\n    request.open('GET', url, true);\n    request.responseType = 'document';\n    request.overrideMimeType('text/xml'); // force xml\n    request.onload = function (event) {\n      // enable button\n      button.disabled = false;\n      // show tags\n      try {\n        showResult(parser.parseNode(event.target.response, url));\n      } catch (error) {\n        showError(error);\n      }\n    };\n    request.onprogress = setProgress;\n    request.onloadend = setProgress;\n    request.onerror = function () {\n      showError('ERROR while retrieving data, see log for details...');\n    };\n    request.send();\n  }\n}\n\n/**\n * Format a parse result into a html element and append it to the 'output' div.\n *\n * @param {Array} result A parse result object array.\n */\nfunction showResult(result) {\n  // append to page as text area\n  if (Array.isArray(result)) {\n    for (let i = 0; i < result.length; ++i) {\n      appendResult('result-' + i, result[i]);\n    }\n  } else {\n    appendResult('result-0', result);\n  }\n}\n\n/**\n * Show an error result.\n *\n * @param {string|Event} error The error to display.\n */\nfunction showError(error) {\n  console.error(error);\n  let message = error;\n  if (typeof error.message !== 'undefined') {\n    message = error.message;\n  }\n  appendResult('error', message);\n}\n\n/**\n * Append a text area to the ouput div.\n *\n * @param {string} name The name of text area.\n * @param {object} content The result content.\n */\nfunction appendResult(name, content) {\n  const div = document.getElementById('output');\n  let contentString = '';\n\n  if (typeof content.name !== 'undefined') {\n    const para = document.createElement('p');\n    let numberOfItems;\n    if (Array.isArray(content.raw)) {\n      numberOfItems = content.raw.length;\n    } else {\n      numberOfItems = Object.keys(content.raw).length;\n    }\n    para.appendChild(document.createTextNode(\n      content.name +\n      ' (' + content.origin +\n      ', ' + numberOfItems + ' items) '\n    ));\n\n    const link = document.createElement('a');\n    link.download = 'result.json';\n    const blob = new Blob([content.data], {type: 'text/plain'});\n    link.href = window.URL.createObjectURL(blob);\n    link.appendChild(document.createTextNode('download'));\n\n    para.appendChild(link);\n    div.appendChild(para);\n\n    contentString = content.data;\n  } else {\n    contentString = content;\n  }\n\n  const area = document.createElement('textarea');\n  area.id = name;\n  area.appendChild(document.createTextNode(contentString));\n  area.spellcheck = false;\n  if (name.includes('error')) {\n    area.className = 'error';\n  } else {\n    area.rows = 20;\n  }\n\n  div.appendChild(area);\n}\n\n/**\n * Update standard select with available standard versions\n */\nfunction updateStandardSelect() {\n  const versionSelect = document.getElementById('dicomVersions');\n\n  // place holder option\n  let versionOption = document.createElement('option');\n  versionOption.disabled = true;\n  versionOption.selected = true;\n  versionOption.text = 'Select a version';\n  versionOption.value = '';\n  versionSelect.add(versionOption);\n  // version options\n  const versions = nema.getDicomVersions();\n  for (let i = 0; i < versions.length; ++i) {\n    versionOption = document.createElement('option');\n    versionOption.text = versions[i];\n    versionOption.value = versions[i];\n    versionSelect.add(versionOption);\n  }\n\n  const partSelect = document.getElementById('dicomParts');\n\n  // place holder option\n  let partOption = document.createElement('option');\n  partOption.disabled = true;\n  partOption.selected = true;\n  partOption.text = 'Select a part';\n  partOption.value = '';\n  partSelect.add(partOption);\n  // part options\n  const parts = nema.getDicomParts();\n  for (let i = 0; i < parts.length; ++i) {\n    partOption = document.createElement('option');\n    partOption.text = parts[i];\n    partOption.value = parts[i];\n    partSelect.add(partOption);\n  }\n\n  const parseButton = document.getElementById('parseButton');\n\n  // update associated links on select change\n  versionSelect.onchange = function (event) {\n    const part = partSelect[partSelect.selectedIndex].value;\n    if (part !== '') {\n      updateVersionLinks(event.target.value, part);\n      parseButton.disabled = false;\n    }\n  };\n  partSelect.onchange = function (event) {\n    const version = versionSelect[versionSelect.selectedIndex].value;\n    if (version !== '') {\n      updateVersionLinks(version, event.target.value);\n      parseButton.disabled = false;\n    }\n  };\n}\n\n/**\n * Update the version links.\n *\n * @param {string} version The dicom standard version.\n * @param {string} partNumber The standard part number\n */\nfunction updateVersionLinks(version, partNumber) {\n  const links = nema.getDicomPartLinks(partNumber)[version];\n  // xml standard link\n  const xmlLink = document.createElement('a');\n  xmlLink.href = links.xml;\n  xmlLink.appendChild(document.createTextNode('xml'));\n  // html standard link\n  const htmlLink = document.createElement('a');\n  htmlLink.href = links.html;\n  htmlLink.appendChild(document.createTextNode('html'));\n\n  const versionLinks = document.getElementById('versionLinks');\n  // clear\n  versionLinks.innerHTML = '';\n  // add new links\n  versionLinks.appendChild(document.createTextNode('(dict: '));\n  versionLinks.append(xmlLink);\n  versionLinks.appendChild(document.createTextNode(', '));\n  versionLinks.append(htmlLink);\n  versionLinks.appendChild(document.createTextNode(')'));\n}\n","\n      import API from \"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../node_modules/css-loader/dist/cjs.js!./style.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../node_modules/css-loader/dist/cjs.js!./style.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import {Gui} from './gui.js';\nimport './style.css';\n\n// setup\nconst gui = new Gui();\ngui.setup();\ngui.onDOMContentLoaded();"],"names":["___CSS_LOADER_EXPORT___","push","module","id","exports","cssWithMappingToString","list","toString","this","map","item","content","needLayer","concat","length","join","i","modules","media","dedupe","supports","layer","undefined","alreadyImportedModules","k","_k","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","sourceMapping","stylesInDOM","getIndexByIdentifier","identifier","result","modulesToDom","options","idCountMap","identifiers","base","count","indexByIdentifier","obj","css","sourceMap","references","updater","addElementStyle","byIndex","splice","api","domAPI","update","newObj","remove","lastIdentifiers","newList","index","newLastIdentifiers","_i","_index","memo","insert","style","target","styleTarget","document","querySelector","window","HTMLIFrameElement","contentDocument","head","e","getTarget","Error","appendChild","element","createElement","setAttributes","attributes","styleElement","nonce","setAttribute","insertStyleElement","styleTagTransform","apply","parentNode","removeChild","removeStyleElement","styleSheet","cssText","firstChild","createTextNode","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","prop","prototype","hasOwnProperty","call","nc","DicomXMLParser","parseNode","partNode","origin","book","label","getAttribute","subtitle","prefix","innerHTML","startsWith","endIndex","indexOf","versionStr","substring","trim","version","year","parseInt","letter","iodList","name","iod","usageRegex","fgModulesProperties","fgLabel","parseModulesFromList","parseModuleListNode","getSelector","modulePropertiesListToObject","raw","parsePs33Node","vrs","tableNode","expectedCaption","values","parseTableNode","parseVrTableNode","extractors","stringVrTypeExtractor","octetVrTypeExtractor","intVrTypeExtractor","floatVrTypeExtractor","wordVrTypeExtractor","floatWordVrTypeExtractor","value","type","vrName","extractor","console","log","vrsNames","keys","vrsResult","isBefore2019e","xmlid","specialVrs","node","expectedCaptionRoot","checkNodeCaption","matches","getElementsByTagName","matchAll","match","parseVrCaptionNode","vrVl32s","filter","includes","vrVl32Result","charSetVrs","regex","paras","para","parseCharSetVrNode","parsePs35Node","tags36","parseTagsTableNode","tagsResults","stringifyTags","adaptTagsForDwv","uids","parseUidTableNode","uidsResults","adaptUidsForDwv","sops","parsePs36Node","tags37","parsePs37Node","getLinkend","str","extractEnum","start","end","desc","enum","split","extractCondition","reqIndex","gotConditionMatch","condition","slice","replace","getCompare","property","b","properties","nodes","querySelectorAll","parseTrNode","isEqualCheck","captions","text","toLowerCase","warn","trNode","parseTdNode","tdNode","childNodes","nodeType","nodeName","parseVariableListNode","parseContentNode","paraNode","linkend","textContent","cleanString","foundTermsList","listNode","listChilds","entries","entryNode","tags","tag","tagPropertiesToObject","uidType","uid","uidPropertiesToObject","keyword","moduleDefinitionPropertiesToObject","moduleName","reference","sectNode","parseModuleAttributesNode","macros","fgModules","rows","startSq0","startSq1","row","nodeCaptions","attribute","attributeName","includeCase","subTable","previousAtt","geSplit","group","vr","vm","startCol","moduleDef","usage","typeRegex","mod","modulePropertiesToObject","extract0","extract1","items","subProperties","subProps","subModule","inputTags","replaceXs","groups","t","grp","sort","res","inputUids","pos","tab","quote","isFirstOfgroup","tagText","dicomVersions","dicomParts","getDicomVersions","compare","versions","majorVersion","minorVersions","j","getDicomPartLinks","partNumber","links","getXmlLink","getHtmlLink","githubRoot","nemaRoot","setProgress","event","progressBar","getElementById","lengthComputable","max","total","loaded","onFileuploadChange","parseButton","files","disabled","onParseButtonClick","button","parser","fileInputElement","file","reader","FileReader","onload","doc","DOMParser","parseFromString","showResult","error","showError","onprogress","onloadend","onerror","readAsText","dicomVersionsSelect","selectedVersion","selectedIndex","dicomPartsSelect","url","nema","xml","request","XMLHttpRequest","open","responseType","overrideMimeType","response","send","Array","isArray","appendResult","message","div","contentString","numberOfItems","link","download","blob","Blob","href","URL","createObjectURL","area","spellcheck","className","updateVersionLinks","xmlLink","htmlLink","html","versionLinks","append","locals","gui","setup","addEventListener","onDOMContentLoaded","versionSelect","versionOption","selected","add","partSelect","partOption","parts","onchange","part","updateStandardSelect"],"sourceRoot":""}